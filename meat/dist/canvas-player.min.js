!function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function s(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!s(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;r>u;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){function r(t,e){if("function"!=typeof t)throw new TypeError(i);return e=s(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=s(n.length-e,0),o=Array(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}var i="Expected a function",s=Math.max;e.exports=r},{}],3:[function(t,e,n){function r(t,e){return void 0===t?e:t}e.exports=r},{}],4:[function(t,e,n){function r(t,e,n){for(var r=-1,s=i(e),o=s.length;++r<o;){var a=s[r],u=t[a],l=n(u,e[a],a,t,e);(l===l?l===u:u!==u)&&(void 0!==u||a in t)||(t[a]=l)}return t}var i=t("../object/keys");e.exports=r},{"../object/keys":28}],5:[function(t,e,n){function r(t,e){return null==e?t:i(e,s(e),t)}var i=t("./baseCopy"),s=t("../object/keys");e.exports=r},{"../object/keys":28,"./baseCopy":6}],6:[function(t,e,n){function r(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var s=e[r];n[s]=t[s]}return n}e.exports=r},{}],7:[function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}e.exports=r},{}],8:[function(t,e,n){function r(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,s){return t.call(e,n,r,i,s)};case 5:return function(n,r,i,s,o){return t.call(e,n,r,i,s,o)}}return function(){return t.apply(e,arguments)}}var i=t("../utility/identity");e.exports=r},{"../utility/identity":30}],9:[function(t,e,n){function r(t){return o(function(e,n){var r=-1,o=null==e?0:n.length,a=o>2?n[o-2]:void 0,u=o>2?n[2]:void 0,l=o>1?n[o-1]:void 0;for("function"==typeof a?(a=i(a,l,5),o-=2):(a="function"==typeof l?l:void 0,o-=a?1:0),u&&s(n[0],n[1],u)&&(a=3>o?void 0:a,o=1);++r<o;){var c=n[r];c&&t(e,c,a)}return e})}var i=t("./bindCallback"),s=t("./isIterateeCall"),o=t("../function/restParam");e.exports=r},{"../function/restParam":2,"./bindCallback":8,"./isIterateeCall":15}],10:[function(t,e,n){function r(t,e){return i(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(void 0,n))})}var i=t("../function/restParam");e.exports=r},{"../function/restParam":2}],11:[function(t,e,n){var r=t("./baseProperty"),i=r("length");e.exports=i},{"./baseProperty":7}],12:[function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return i(n)?n:void 0}var i=t("../lang/isNative");e.exports=r},{"../lang/isNative":22}],13:[function(t,e,n){function r(t){return null!=t&&s(i(t))}var i=t("./getLength"),s=t("./isLength");e.exports=r},{"./getLength":11,"./isLength":16}],14:[function(t,e,n){function r(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?s:e,t>-1&&t%1==0&&e>t}var i=/^\d+$/,s=9007199254740991;e.exports=r},{}],15:[function(t,e,n){function r(t,e,n){if(!o(n))return!1;var r=typeof e;if("number"==r?i(n)&&s(e,n.length):"string"==r&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var i=t("./isArrayLike"),s=t("./isIndex"),o=t("../lang/isObject");e.exports=r},{"../lang/isObject":24,"./isArrayLike":13,"./isIndex":14}],16:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;e.exports=r},{}],17:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}e.exports=r},{}],18:[function(t,e,n){function r(t){for(var e=u(t),n=e.length,r=n&&t.length,l=!!r&&a(r)&&(s(t)||i(t)),h=-1,p=[];++h<n;){var f=e[h];(l&&o(f,r)||c.call(t,f))&&p.push(f)}return p}var i=t("../lang/isArguments"),s=t("../lang/isArray"),o=t("./isIndex"),a=t("./isLength"),u=t("../object/keysIn"),l=Object.prototype,c=l.hasOwnProperty;e.exports=r},{"../lang/isArguments":19,"../lang/isArray":20,"../object/keysIn":29,"./isIndex":14,"./isLength":16}],19:[function(t,e,n){function r(t){return s(t)&&i(t)&&a.call(t,"callee")&&!u.call(t,"callee")}var i=t("../internal/isArrayLike"),s=t("../internal/isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable;e.exports=r},{"../internal/isArrayLike":13,"../internal/isObjectLike":17}],20:[function(t,e,n){var r=t("../internal/getNative"),i=t("../internal/isLength"),s=t("../internal/isObjectLike"),o="[object Array]",a=Object.prototype,u=a.toString,l=r(Array,"isArray"),c=l||function(t){return s(t)&&i(t.length)&&u.call(t)==o};e.exports=c},{"../internal/getNative":12,"../internal/isLength":16,"../internal/isObjectLike":17}],21:[function(t,e,n){function r(t){return i(t)&&a.call(t)==s}var i=t("./isObject"),s="[object Function]",o=Object.prototype,a=o.toString;e.exports=r},{"./isObject":24}],22:[function(t,e,n){function r(t){return null==t?!1:i(t)?c.test(u.call(t)):s(t)&&o.test(t)}var i=t("./isFunction"),s=t("../internal/isObjectLike"),o=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,l=a.hasOwnProperty,c=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{"../internal/isObjectLike":17,"./isFunction":21}],23:[function(t,e,n){function r(t){return"number"==typeof t||i(t)&&a.call(t)==s}var i=t("../internal/isObjectLike"),s="[object Number]",o=Object.prototype,a=o.toString;e.exports=r},{"../internal/isObjectLike":17}],24:[function(t,e,n){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=r},{}],25:[function(t,e,n){function r(t){return"string"==typeof t||i(t)&&a.call(t)==s}var i=t("../internal/isObjectLike"),s="[object String]",o=Object.prototype,a=o.toString;e.exports=r},{"../internal/isObjectLike":17}],26:[function(t,e,n){var r=t("../internal/assignWith"),i=t("../internal/baseAssign"),s=t("../internal/createAssigner"),o=s(function(t,e,n){return n?r(t,e,n):i(t,e)});e.exports=o},{"../internal/assignWith":4,"../internal/baseAssign":5,"../internal/createAssigner":9}],27:[function(t,e,n){var r=t("./assign"),i=t("../internal/assignDefaults"),s=t("../internal/createDefaults"),o=s(r,i);e.exports=o},{"../internal/assignDefaults":3,"../internal/createDefaults":10,"./assign":26}],28:[function(t,e,n){var r=t("../internal/getNative"),i=t("../internal/isArrayLike"),s=t("../lang/isObject"),o=t("../internal/shimKeys"),a=r(Object,"keys"),u=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?o(t):s(t)?a(t):[]}:o;e.exports=u},{"../internal/getNative":12,"../internal/isArrayLike":13,"../internal/shimKeys":18,"../lang/isObject":24}],29:[function(t,e,n){function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(s(t)||i(t))&&e||0;for(var n=t.constructor,r=-1,l="function"==typeof n&&n.prototype===t,h=Array(e),p=e>0;++r<e;)h[r]=r+"";for(var f in t)p&&o(f,e)||"constructor"==f&&(l||!c.call(t,f))||h.push(f);return h}var i=t("../lang/isArguments"),s=t("../lang/isArray"),o=t("../internal/isIndex"),a=t("../internal/isLength"),u=t("../lang/isObject"),l=Object.prototype,c=l.hasOwnProperty;e.exports=r},{"../internal/isIndex":14,"../internal/isLength":16,"../lang/isArguments":19,"../lang/isArray":20,"../lang/isObject":24}],30:[function(t,e,n){function r(t){return t}e.exports=r},{}],31:[function(t,e,n){var r=arguments[3],i=arguments[4],s=arguments[5],o=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(s),a=0,u=n.length;u>a;a++){var l=n[a];if(s[l].exports===t){e=l;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},a=0,u=n.length;u>a;a++){var l=n[a];c[l]=l}i[e]=[Function(["require","module","exports"],"("+t+")(self)"),c]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[e]=e,i[h]=[Function(["require"],"require("+o(e)+")(self)"),p];var f="("+r+")({"+Object.keys(i).map(function(t){return o(t)+":["+i[t][0]+","+o(i[t][1])+"]"}).join(",")+"},{},["+o(h)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(y.createObjectURL(new Blob([f],{type:"text/javascript"})))}},{}],32:[function(t,e,n){console.log("Canvas player!"),function(e){e.CanvasPlayer=t("./player"),e.CanvasClip=t("./clip"),e.ColorUtil=t("./color")}(window)},{"./clip":33,"./color":34,"./player":36}],33:[function(t,e,n){var r,i,s,o,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty,f=[].slice;a=t("lodash/object/defaults"),s=t("./playable"),l=t("lodash/lang/isNumber"),u=t("lodash/lang/isFunction"),o=t("./runner"),i=t("./color"),e.exports=r=function(t){function e(t,e){this.sprite=t,this.apply=c(this.apply,this),this._onError=c(this._onError,this),this._onLoad=c(this._onLoad,this),this.opts=a({},e,this.constructor.DefaultOpts),console.log(this.opts),console.log(this.sprite),this._loaded=!1,this._in_t=this._out_t=0,this._duration=1e3/this.opts.fps*this.opts.frames,this._alpha_transfroms=[],this._filters=[],this._status="idle",this._load()}return h(e,t),e.DefaultOpts={fps:15,width:800,height:450,maxConcurrency:10},e.prototype._load=function(){return this._ori_image=new Image,this._ori_image.onload=this._onLoad,this._ori_image.onerror=this._onError,this._ori_image.src=this.sprite},e.prototype._onLoad=function(){return this._loaded=!0,this._status="loaded",this.emit("loaded")},e.prototype._onError=function(t){return this._status="error",this.emit("error",t)},e.prototype.getStatus=function(){return this._status},e.prototype.duration=function(){return this._in_t+this._duration+this._out_t},e.prototype.apply=function(){return this._loaded?(console.time("apply"),this._applyFadeIn(),this._applyFadeOut(),console.time("filter"),this._applyFiltersInWorker(function(t){return function(e){return console.timeEnd("filter"),console.timeEnd("apply"),e?t.emit("error",e):(t._status="ready",t.emit("ready"))}}(this))):this.once("loaded",this.apply)},e.prototype.willPlay=function(){return this.apply()},e.prototype._applyFadeIn=function(){var t;return this._in_t>0?(t=this._applyAlphaTransform("clip",0),this.alpha(function(e,n){return"fade_in"===e?n*t:-1})):void 0},e.prototype._applyFadeOut=function(){var t;return this._out_t>0?(t=this._applyAlphaTransform("clip",1),this.alpha(function(e,n){return"fade_out"===e?(1-n)*t:-1})):void 0},e.prototype._applyFilters=function(t){var e,n,r,s;return r=this._ori_image,s=r.width,e=r.height,null==this.filterCanvas&&(console.time("init"),this.filterCanvas=document.createElement("canvas"),this.filterCanvas.width=s,this.filterCanvas.height=e,this.filterCtx=this.filterCanvas.getContext("2d"),this._image=new Image,console.timeEnd("init")),console.time("read"),this.filterCtx.drawImage(this._ori_image,0,0),this._imageData=n=this.filterCtx.getImageData(0,0,s,e),console.timeEnd("read"),console.time("run"),this._filters.forEach(function(t){return t.f.apply(t,[n,i].concat(f.call(t.args)))}),this.filterCtx.putImageData(n,0,0),console.timeEnd("run"),t()},e.prototype._applyFiltersInWorker=function(t){var e,n,r,i,s,a,u,l,c,h,p,f,y,v,g,d,_,m;if(p=this._ori_image,m=p.width,i=p.height,null==this.filterCanvas&&(this.filterCanvas=document.createElement("canvas"),this.filterCanvas.width=m,this.filterCanvas.height=i,this.filterCtx=this.filterCanvas.getContext("2d"),this._image=new Image),this.filterCtx.drawImage(this._ori_image,0,0),a=this.filterCtx.getImageData(0,0,m,i),e=function(e){return function(n,r){return n?(console.error(n),t(n)):(r&&e.filterCtx.putImageData(r,0,0),t())}}(this),this._filters.length>0){for(c=this.opts.maxConcurrency,d=[],this._runners||(this._runners=function(){y=[];for(var t=0,e=c-1;e>=0?e>=t:t>=e;e>=0?t++:t--)y.push(t);return y}.apply(this).map(function(){return new o})),v=this._runners,_=i/c,console.time("Split"),s=u=0,f=c-1;f>=0?f>=u:u>=f;s=f>=0?++u:--u)g=this.filterCtx.getImageData(0,_*s,m,_),d.push(g);return console.timeEnd("Split"),n=0,h=[],r=[],l=function(t){return function(){var n,i;if(r.length>0)return e(r);for(console.time("merge"),s=n=0,i=c-1;i>=0?i>=n:n>=i;s=i>=0?++n:--n)g=t.filterCtx.putImageData(h[s],0,_*s);return console.timeEnd("merge"),e()}}(this),console.time("run"),v.forEach(function(t){return function(e,i){return e.run(function(t,e,n,r){return t.forEach(function(t,i){return t.apply(void 0,[n,r].concat(e[i]))}),n},t._filters.map(function(t){return t.f}),t._filters.map(function(t){return t.args}),d[i],function(t,e){return n++,t?(console.error(i+":"),console.error(t),r.push(t)):h[i]=e,n===c?(console.timeEnd("run"),l()):void 0})}}(this))}return e()},e.prototype.render=function(t,e){var n,r,i,s,o,a,u,l,c,h,p,f,y,v;return h=this.opts,f=h.width,l=h.height,n=h.cols,a=h.fps,u=h.frames,r=e-this._in_t,p="clip",0>r?(p="fade_in",r=0,c=s=e/this._in_t,i=0):r>this._duration?(p="fade_out",c=o=(r-this._duration)/this._out_t,r=this._duration,i=u-1):(p="clip",i=r/(1e3/a),c=(e-this._in_t)/this._duration),y=~~(i%n)*f,v=~~(i/n)*l,t.globalAlpha=this._applyAlphaTransform(p,c),t.drawImage(this.filterCanvas,y,v,f,l,this._applyTransform("x",p,c),this._applyTransform("y",p,c),f,l)},e.prototype.renderFrame=function(t,e){var n,r,i,s,o,a,u,l,c;return a=this.opts,u=a.width,s=a.height,n=a.cols,r=a.fps,i=a.frames,l=~~(e%n)*u,c=~~(e/n)*s,o=e/i,t.globalAlpha=this._applyAlphaTransform("clip",o),t.drawImage(this.filterCanvas,l,c,u,s,this._applyTransform("x","clip",o),this._applyTransform("y","clip",o),u,s)},e.prototype._applyAlphaTransform=function(t,e){var n,r;return 0===this._alpha_transfroms.length?1:(n=function(n){return l(n)?n:u(n)?n(t,e):void 0},r=1,this._alpha_transfroms.forEach(function(t){var e;return e=n(t),e>=0?r=e:void 0}),r)},e.prototype._applyTransform=function(t,e,n){var r;return r=this["t"+t],null==r?0:l(r)?r:r(e,n)},e.prototype.fadeIn=function(t){return this._in_t=t,this},e.prototype.fadeOut=function(t){return this._out_t=t,this},e.prototype.addFilter=function(){var t,e;return e=arguments[0],t=2<=arguments.length?f.call(arguments,1):[],u(e)&&(this._status="ready"===this._status?"loaded":"idle",this._filters.push({f:e,args:null!=t?t:[]})),this},e.prototype.removeFilter=function(t){var e;return u(t)&&(e=this._filters.findIndex(function(e){return e.f===t}),e>=0&&(this._status="ready"===this._status?"loaded":"idle",this._filters.splice(e,1))),this},e.prototype.updateFilter=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?f.call(arguments,1):[],u(e)&&(n=this._filters.find(function(t){return t.f===e}),this._status="ready"===this._status?"loaded":"idle",null!=n&&(n.args=t)),this},e.prototype.clearFilters=function(){return this._filters=[],this._status="ready"===this._status?"loaded":"idle",this},e.prototype.x=function(t){return(l(t)||u(t))&&(this.tx=t),this},e.prototype.y=function(t){return(l(t)||u(t))&&(this.ty=t),this},e.prototype.scale=function(t){return this.ts=t,this},e.prototype.alpha=function(t){return(l(t)||u(t))&&this._alpha_transfroms.push(t),this},e}(s)},{"./color":34,"./playable":35,"./runner":37,"lodash/lang/isFunction":21,"lodash/lang/isNumber":23,"lodash/object/defaults":27}],34:[function(t,e,n){e.exports={rgbToHsl:function(t,e,n){var r,i,s,o,a,u;if(t/=255,e/=255,n/=255,o=Math.max(t,e,n),a=Math.min(t,e,n),i=void 0,u=void 0,s=(o+a)/2,o===a)i=u=0;else{switch(r=o-a,u=s>.5?r/(2-o-a):r/(o+a),o){case t:i=(e-n)/r+(n>e?6:0);break;case e:i=(n-t)/r+2;break;case n:i=(t-e)/r+4}i/=6}return[i,u,s]},hslToRgb:function(t,e,n){var r,i,s,o,a,u;return u=void 0,i=void 0,r=void 0,s=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t},0===e?u=i=r=n:(a=.5>n?n*(1+e):n+e-n*e,o=2*n-a,u=s(o,a,t+1/3),i=s(o,a,t),r=s(o,a,t-1/3)),[255*u,255*i,255*r]}}},{}],35:[function(t,e,n){var r,i,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=t("events").EventEmitter,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.willPlay=function(){},e.prototype.render=function(t,e){throw new Error("Not implemented")},e.prototype.duration=function(){throw new Error("Not implemented")},e.prototype.getStatus=function(){throw new Error("Not implemented")},e}(r)},{events:1}],36:[function(t,e,n){var r,i,s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=t("events").EventEmitter,s=t("lodash/object/defaults"),o=t("lodash/lang/isString"),e.exports=r=function(t){function e(t,e){this._tick=a(this._tick,this),this.play=a(this.play,this),this.opts=s({},e,this.constructor.DefaultOpts),this.el=o(t)?document.querySelector(t):t,this._stopping=!1,this._initCanvas()}return u(e,t),e.DefaultOpts={width:800,height:450},e.prototype._initCanvas=function(){return this.canvas=document.createElement("canvas"),this.canvas.width=this.opts.width,this.canvas.height=this.opts.height,this.ctx=this.canvas.getContext("2d"),this.el.appendChild(this.canvas)},e.prototype.play=function(t){return"ready"!==t.getStatus()?(console.log("waiting: "+t.getStatus()),t.once("ready",this.play.bind(this,t))):(this._t0=-1,this.playable=t,console.log("Play"),this.emit("play"),requestAnimationFrame(this._tick)),this},e.prototype.stop=function(){return this._stopping=!0},e.prototype.seek=function(t,e){return t.renderFrame(this.ctx,e)},e.prototype.pause=function(){return this.emit("pause")},e.prototype.resume=function(){return this.emit("resume")},e.prototype._tick=function(t){var e;return this._t0<0&&(this._t0=t),e=(t-this._t0)%this.playable.duration(),console.log(e),this.ctx.clearRect(0,0,this.opts.width,this.opts.height),this.playable.render(this.ctx,e),requestAnimationFrame(this._tick),this._t0!==t&&1e3/60>e?this.emit("complete"):void 0},e}(i)},{events:1,"lodash/lang/isString":25,"lodash/object/defaults":27}],37:[function(t,e,n){var r,i,s,o,a,u,l=function(t,e){return function(){return t.apply(e,arguments)}},c=[].slice;u=t("lodash/lang/isFunction"),a=t("lodash/lang/isArray"),s=t("webworkify"),o=/function\s*.*\s*\((.*)\)\s*\{([\s\S]*)\}/,i=0,e.exports=r=function(){function e(){this.onMessage=l(this.onMessage,this),this.worker=new s(t("./worker")),this.worker.addEventListener("message",this.onMessage),this._callbacks={}}return e.prototype.onMessage=function(t){var e,n,r;return r=t.data,n=r.id,e=this._callbacks[n],delete this._callbacks[n],"function"==typeof e?e(r.err,r.result):void 0},e.prototype.packFn=function(t){var e,n,r,i;if(!u(t))throw new TypeError("'fn' is not a function");return i=t.toString().match(o),e=i[1].split(",").map(function(t){return t.trim()}),n=i[2],r={args:e,body:n}},e.prototype.packFnInArray=function(t){var e,n,r,i;for(n=r=0,i=t.length;i>r;n=++r)e=t[n],u(e)?t[n]=this.packFn(e):a(e)&&(t[n]=this.packFnInArray(e));return t},e.prototype.run=function(){var t,e,n,r,s;return n=arguments[0],t=3<=arguments.length?c.call(arguments,1,r=arguments.length-1):(r=1,[]),e=arguments[r++],s={id:i++,fn:this.packFn(n),args:this.packFnInArray(t)},this.worker.postMessage(s),this._callbacks[s.id]=e},e}()},{"./worker":38,"lodash/lang/isArray":20,"lodash/lang/isFunction":21,webworkify:31}],38:[function(t,e,n){var r,i,s,o,a,u,l;a=t("lodash/lang/isObject"),o=t("lodash/lang/isArray"),l=t("lodash/lang/isString"),r=t("./color"),u=function(t){return a(t)&&o(t.args)&&l(t.body)},i=function(t){var e,n;return e=t.args,n=t.body,e=e.concat(n),e.unshift(null),new(Function.prototype.bind.apply(Function,e))},s=function(t){var e,n,r,a;for(n=r=0,a=t.length;a>r;n=++r)e=t[n],u(e)?t[n]=i(e):o(e)&&(t[n]=s(e));return t},e.exports=function(t){return t.addEventListener("message",function(e){var n,o,a,u,l,c,h,p;c=e.data,l=i(c.fn),n=s(c.args),n.push(r);try{h=l.apply(null,n)}catch(u){a=u,o={name:a.name,message:a.message,stack:a.stack}}return p={id:c.id,result:h,err:o},t.postMessage(p)})}},{"./color":34,"lodash/lang/isArray":20,"lodash/lang/isObject":24,"lodash/lang/isString":25}]},{},[32]);